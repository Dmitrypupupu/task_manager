#import "typst_lib/gost.typ": *

#show: init

= ВВЕДЕНИЕ

== Цель работы

Целью данной работы является разработка консольного приложения на языке C++ для управления персональными текстовыми заметками с возможностью их создания, поиска, фильтрации и просмотра.

== Задачи работы

+ Проанализировать предметную область «Система управления заметками»
+ Разработать архитектуру системы
+ Реализовать функции создания, удаления и редактирования заметок
+ Организовать эффективное хранение данных
+ Реализовать механизмы поиска и фильтрации
+ Обеспечить обработку ошибок и пользовательский интерфейс

= АНАЛИЗ ПРЕДМЕТНОЙ ОБЛАСТИ

== Постановка задачи

Разработать программу «Система управления заметками», которая должна предоставлять пользователю возможность создания, хранения, поиска и управления текстовыми заметками.

Каждая заметка должна сохраняться в виде текстового файла и содержать следующие атрибуты:

- Название
- Тема
- Дата создания
- Текст заметки

Программа должна обеспечивать:

- Добавление и удаление заметок
- Вывод списка всех заметок с возможностью фильтрации по дате или теме
- Открытие и отображение текста выбранной заметки
- Хранение метаданных заметок в структурированном виде для эффективного доступа

== Концептуальная модель

Основная сущность — Заметка (NOTE). Её атрибуты:

- Название (Title): Строковый атрибут, уникальный идентификатор заметки
- Тема (Category): Строковый атрибут, определяет тематику заметки
- Дата создания (Creation Date): Автоматически устанавливается при создании заметки
- Текст заметки (Content): Основное содержимое заметки
- Путь к файлу (File Path): Полный путь к файлу заметки на диске

== Функциональные требования

+ *Добавление заметки*: Пользователь вводит название, тему, текст. Программа создаёт текстовый файл в указанной директории, сохраняет метаданные
+ *Удаление заметки*: Удаляется файл заметки и соответствующая запись в каталоге
+ *Поиск и фильтрация*: Возможен вывод списка заметок по дате или по теме
+ *Открытие заметки*: Программа считывает и выводит содержимое текстового файла
+ *Целостность данных*: Проверка уникальности названия, обработка ошибок доступа к файлам

= АНАЛИЗ МЕТОДОВ ХРАНЕНИЯ ДАННЫХ И АЛГОРИТМОВ

== Методы хранения данных

Для хранения метаданных заметок могут использоваться следующие структуры данных:

=== Линейный односвязный список

*Преимущества:*
- Простота реализации
- Эффективное добавление и удаление элементов
- Динамическое изменение размера

*Недостатки:*
- Медленный доступ к произвольному элементу (O(n))
- Неэффективен для частого поиска

=== Двусвязный список

*Преимущества:*
- Возможность обхода в обе стороны
- Удобство удаления элементов

*Недостатки:*
- Больший расход памяти на хранение ссылок
- Сложность реализации по сравнению с односвязным списком

=== Динамический массив (вектор)

*Преимущества:*
- Быстрый доступ по индексу (O(1))
- Эффективное использование кэша процессора

*Недостатки:*
- Медленное добавление/удаление в середине (O(n))
- Возможность избыточного выделения памяти

=== Хэш-таблица

*Преимущества:*
- Быстрый поиск по ключу (O(1) в среднем случае)
- Эффективна для частых операций поиска

*Недостатки:*
- Затраты по памяти
- Сложность реализации
- Неупорядоченность данных

== Методы сортировки

=== Пузырьковая сортировка

- Сложность: O(n²)
- Простота реализации
- Стабильность

=== Сортировка выбором

- Сложность: O(n²)
- Простота реализации
- Нестабильность

=== Быстрая сортировка (QuickSort)

- Сложность: O(n log n) в среднем случае
- Высокая производительность
- Нестабильность

=== Сортировка слиянием (MergeSort)

- Сложность: O(n log n)
- Стабильность
- Требует дополнительной памяти

== Методы поиска

=== Линейный поиск

- Сложность: O(n)
- Подходит для неупорядоченных данных
- Простота реализации

=== Бинарный поиск

- Сложность: O(log n)
- Требует отсортированных данных
- Эффективен для частого поиска

=== Поиск в хэш-таблице

- Сложность: O(1) в среднем случае
- Максимальная скорость поиска
- Требует дополнительной памяти

= ТЕХНИЧЕСКОЕ ЗАДАНИЕ

== Язык программирования и среда разработки

- Язык программирования: C++
- Стандарт: C++17
- Среда разработки: Visual Studio Code / Visual Studio
- Компилятор: GCC / MSVC

== Функциональные требования

+ Создание новой заметки с указанием названия, темы и текста
+ Удаление существующей заметки
+ Просмотр списка всех заметок
+ Фильтрация заметок по теме
+ Сортировка заметок по дате создания
+ Просмотр содержимого выбранной заметки
+ Сохранение данных между сеансами работы

== Нефункциональные требования

- Время отклика системы: не более 1 секунды
- Поддержка до 1000 заметок
- Кроссплатформенность (Windows/Linux)
- Простота использования
- Обработка ошибочных ситуаций

= РАЗРАБОТКА И АНАЛИЗ ТРЕБОВАНИЙ

== Требования к пользовательскому интерфейсу

=== Сценарии использования

*Сценарий UC_1: Запуск приложения*

- *Идентификатор сценария:* UC_1
- *Предусловия:* Имеется исполняющий файл приложения
- *Действующие лица:* Пользователь, операционная система
- *Цель:* Запуск консольного приложения
- *Успешный сценарий:*
  + Пользователь запускает приложение
  + На экране отображается пронумерованный список пунктов меню и предложение ввести номер одного из пунктов
  + Пользователь вводит номер пункта меню
- *Результат:* Начало работы приложения

*Сценарий UC_2: Добавление новой заметки*

- *Идентификатор сценария:* UC_2
- *Предусловия:* Приложение корректно запущено в соответствии со сценарием UC_1
- *Действующие лица:* Пользователь, система хранения данных
- *Цель:* Добавить новую текстовую заметку в систему
- *Успешный сценарий:*
  + Пользователь вводит номер пункта меню "Создать заметку"
  + На экране отображается предложение ввести название заметки
  + Пользователь вводит название заметки и нажимает Enter
  + Приложение выводит сообщение с предложением ввести тему заметки
  + Пользователь вводит тему заметки и нажимает Enter
  + Приложение выводит сообщение с предложением ввести текст заметки
  + Пользователь вводит текст заметки и нажимает Enter
  + Приложение сохраняет заметку и выводит сообщение об успешном создании
- *Результат:* Новая заметка успешно добавлена в систему
- *Возможные варианты неуспешного выполнения:*
  - 3a. Если пользователь ввел название, которое уже существует, приложение выводит сообщение об ошибке и предлагает повторить ввод
  - 5a. Если пользователь ввел пустую тему, приложение выводит сообщение об ошибке и предлагает повторить ввод

*Сценарий UC_3: Просмотр списка всех заметок*

- *Идентификатор сценария:* UC_3
- *Предусловия:* Приложение корректно запущено
- *Действующие лица:* Пользователь, система хранения данных
- *Цель:* Просмотреть список всех сохраненных заметок
- *Успешный сценарий:*
  + Пользователь вводит номер пункта меню "Показать все заметки"
  + Приложение выводит таблицу со списком всех заметок, содержащую колонки: номер, название, тема, дата создания
  + Пользователь просматривает список заметок
- *Результат:* Отображен полный список заметок
- *Возможные варианты неуспешного выполнения:*
  - 2a. Если в системе нет заметок, приложение выводит сообщение "Заметки не найдены" и возвращает в главное меню

*Сценарий UC_4: Поиск заметок по теме*

- *Идентификатор сценария:* UC_4
- *Предусловия:* Приложение корректно запущено
- *Действующие лица:* Пользователь, система хранения данных
- *Цель:* Найти заметки по заданной теме
- *Успешный сценарий:*
  + Пользователь вводит номер пункта меню "Поиск по теме"
  + Приложение выводит предложение ввести тему для поиска
  + Пользователь вводит тему и нажимает Enter
  + Приложение выводит таблицу с заметками указанной темы
- *Результат:* Отображены заметки заданной темы
- *Возможные варианты неуспешного выполнения:*
  - 4a. Если заметки с указанной темой не найдены, приложение выводит сообщение "Заметки не найдены" и предлагает повторить поиск

*Сценарий UC_5: Просмотр содержимого заметки*

- *Идентификатор сценария:* UC_5
- *Предусловия:* Приложение корректно запущено, отображен список заметок
- *Действующие лица:* Пользователь, система хранения данных
- *Цель:* Просмотреть полное содержимое выбранной заметки
- *Успешный сценарий:*
  + Пользователь вводит номер пункта меню "Открыть заметку"
  + Приложение выводит предложение ввести номер заметки
  + Пользователь вводит номер заметки и нажимает Enter
  + Приложение выводит полное содержимое заметки: название, тему, дату создания, текст
- *Результат:* Отображено полное содержимое заметки
- *Возможные варианты неуспешного выполнения:*
  - 3a. Если введен несуществующий номер заметки, приложение выводит сообщение об ошибке и предлагает повторить ввод

*Сценарий UC_6: Удаление заметки*

- *Идентификатор сценария:* UC_6
- *Предусловия:* Приложение корректно запущено
- *Действующие лица:* Пользователь, система хранения данных
- *Цель:* Удалить выбранную заметку из системы
- *Успешный сценарий:*
  + Пользователь вводит номер пункта меню "Удалить заметку"
  + Приложение выводит предложение ввести номер заметки для удаления
  + Пользователь вводит номер заметки и нажимает Enter
  + Приложение запрашивает подтверждение удаления
  + Пользователь подтверждает удаление
  + Приложение удаляет заметку и выводит сообщение об успешном удалении
- *Результат:* Заметка удалена из системы
- *Возможные варианты неуспешного выполнения:*
  - 3a. Если введен несуществующий номер заметки, приложение выводит сообщение об ошибке и предлагает повторить ввод
  - 5a. Если пользователь отменяет удаление, приложение возвращает в главное меню

=== Макеты пользовательского интерфейса

*Главное меню программы:*

```
=== СИСТЕМА УПРАВЛЕНИЯ ЗАМЕТКАМИ ===

1. Создать новую заметку
2. Показать все заметки
3. Поиск по теме
4. Открыть заметку
5. Удалить заметку
6. Выход

Выберите пункт меню: _
```

*Макет таблицы вывода заметок:*

```
=== СПИСОК ЗАМЕТОК ===

№  Название          Тема        Дата создания
-- ----------------  ----------  ----------------
1  Покупки          Список      2024-01-15
2  Идеи проекта     Работа      2024-01-16
3  Рецепт           Кулинария   2024-01-17
```

*Макет просмотра содержимого заметки:*

```
=== ЗАМЕТКА #1 ===

Название: Покупки
Тема: Список
Дата: 2024-01-15

Текст:
- Молоко
- Хлеб
- Яйца
- Фрукты
```

== Требования к программному интерфейсу и используемым ресурсам

=== Программный интерфейс

- *Операционная система:* Windows 10/11, Linux (совместимые дистрибутивы)
- *Стандарт языка:* C++17
- *Внешние библиотеки:* Стандартная библиотека C++ (STL)
- *Файловая система:* Работа с текстовыми файлами через стандартные средства ввода-вывода

=== Системные требования

- *Процессор:* x86/x64 с поддержкой стандарта C++17
- *Оперативная память:* Не менее 512 МБ
- *Дисковое пространство:* Не менее 10 МБ для исполняемого файла и данных
- *Дополнительное оборудование:* Клавиатура для ввода данных

=== Интеграционные возможности

- *Файловый ввод-вывод:* Сохранение данных в текстовых файлах с возможностью ручного редактирования
- *Формат данных:* Текстовые файлы в кодировке UTF-8
- *Взаимодействие с ОС:* Использование стандартных потоков ввода-вывода консоли

=== Ограничения

- Программа не требует установки дополнительного программного обеспечения
- Не требует прав администратора для работы
- Работает в автономном режиме без сетевых соединений
- Поддерживает хранение до 1000 заметок (ограничение может быть изменено в настройках компиляции)

= ПРОЕКТИРОВАНИЕ СТРУКТУРЫ ПРОГРАММЫ

== Архитектура программного обеспечения

На основе анализа требований и предметной области разработана модульная архитектура системы управления заметками. Программа состоит из следующих основных компонентов:

#figure(
  image("123.png", width: 50%),
  caption: [Архитектура системы управления заметками]
) <fig:arch>

=== Основные модули системы

+ *Модуль пользовательского интерфейса (UI)* - отвечает за взаимодействие с пользователем, отображение меню и обработку вводимых команд
+ *Модуль управления данными (Data Manager)* - осуществляет операции с заметками: создание, чтение, обновление, удаление
+ *Модуль хранения данных (Storage)* - обеспечивает сохранение и загрузку данных в файловую систему
+ *Модуль поиска и фильтрации (Search)* - реализует алгоритмы поиска заметок по различным критериям
+ *Модуль валидации данных (Validation)* - проверяет корректность вводимых пользователем данных

== Структура данных

=== Описание основного объекта программы

Основной объект программы - структура `Note`, представляющая собой текстовую заметку:

```cpp
struct Note {
    int id;                    // Уникальный идентификатор заметки
    std::string title;         // Название заметки
    std::string category;      // Тема/категория заметки
    std::string content;       // Текст заметки
    std::string creationDate;  // Дата создания в формате ГГГГ-ММ-ДД
    std::string filePath;      // Путь к файлу заметки
};
```

*Описание полей структуры:*

- *id* - целочисленный уникальный идентификатор. Используется тип `int`, так как предполагается хранение до 1000 заметок. Автоматически генерируется программой при создании новой заметки.

- *title* - название заметки. Тип данных: `std::string`. Ограничения: длина от 1 до 100 символов, может содержать буквы русского и латинского алфавита, цифры, пробелы и знаки препинания.

- *category* - тема/категория заметки. Тип данных: `std::string`. Ограничения: длина от 1 до 50 символов, допустимы буквы русского и латинского алфавита.

- *content* - текст заметки. Тип данных: `std::string`. Ограничения: максимальная длина 10000 символов, поддерживает многострочный текст.

- *creationDate* - дата создания. Тип данных: `std::string`. Формат: ГГГГ-ММ-ДД. Заполняется автоматически при создании заметки.

- *filePath* - путь к файлу. Тип данных: `std::string`. Содержит полный путь к текстовому файлу заметки на диске.

=== Структура для хранения коллекции заметок

Для хранения коллекции заметок используется статический массив:

```cpp
class NoteManager {
private:
    Note notes[MAX_NOTES];  // Коллекция заметок
    int noteCount;          // Текущее количество заметок
    int nextId;             // Следующий доступный ID
};
```

*Обоснование выбора массива:*
- Быстрый доступ по индексу (O(1)) для операций отображения и открытия заметок
- Эффективное использование кэша процессора

== Словарь данных

В таблице представлен словарь данных, содержащий описание всех данных, запрашиваемых у пользователя, и соответствующих проверок.

#figure(
  kind: table,
  caption: [Словарь данных],
  table(
    columns: (auto, auto, 1fr, 1.5fr),
    align: (left, left, left, left),
    table.header(
      [*Наименование переменной*],
      [*Тип данных*],
      [*Семантика*],
      [*Проверки корректности ввода*]
    ),
    [menu_choice], [int], [Выбор пункта меню], [Целое число от 1 до 6],
    [note_title], [string], [Название заметки], [Длина от 1 до 100 символов, запрещены специальные символы кроме пробелов и дефисов],
    [note_category], [string], [Тема заметки], [Длина от 1 до 50 символов, только буквы и пробелы],
    [note_content], [string], [Текст заметки], [Длина до 10000 символов, многострочный ввод],
    [search_category], [string], [Тема для поиска], [Длина от 1 до 50 символов, проверка существования тем],
    [note_id], [int], [Идентификатор заметки], [Целое число от 1 до 1000, проверка существования ID],
  )
)

== Описание файлов

=== Файл метаданных notes_metadata.dat

Содержит информацию о всех заметках в системе. Структура файла:

```
<id>|<title>|<category>|<creation_date>|<file_path>
```

*Пример содержимого:*
```
1|Покупки|Список|2024-01-15|./notes/1_покупки.txt
2|Идеи проекта|Работа|2024-01-16|./notes/2_идеи_проекта.txt
3|Рецепт|Кулинария|2024-01-17|./notes/3_рецепт.txt
```

*Описание полей:*
- Разделитель полей: символ '|'
- Кодировка: UTF-8
- Каждая запись занимает одну строку
- Файл автоматически сортируется по дате создания при сохранении

=== Текстовые файлы заметок

Каждая заметка сохраняется в отдельном текстовом файле с именем формата:
```
<id>_<название>.txt
```

*Структура файла заметки:*
```
Название: <title>
Тема: <category>
Дата: <creation_date>

<content>
```

== Алгоритмы работы системы

=== Алгоритм добавления новой заметки

+ Получить от пользователя название, тему и текст заметки
+ Проверить уникальность названия
+ Сгенерировать уникальный ID
+ Создать структуру Note с текущей датой
+ Сохранить текстовый файл заметки
+ Добавить запись в файл метаданных
+ Обновить коллекцию в оперативной памяти

=== Алгоритм поиска заметок по теме

+ Получить тему для поиска от пользователя
+ Выполнить линейный поиск по коллекции заметок
+ Для каждой заметки сравнить поле category с искомым значением
+ Сформировать список найденных заметок
+ Отсортировать результаты по дате создания
+ Вывести результаты в табличном формате

=== Алгоритм удаления заметки

+ Получить ID заметки для удаления
+ Найти заметку в коллекции
+ Запросить подтверждение удаления
+ Удалить текстовый файл заметки
+ Удалить запись из файла метаданных
+ Удалить элемент из коллекции в памяти
+ Перенумеровать оставшиеся заметки при необходимости

== Взаимодействие модулей

На рисунке представлена диаграмма взаимодействия основных модулей системы.

#figure(
  image("11.png", width: 100%),
  caption: [Взаимодействие модулей системы]
) <fig:modules>

*Основные потоки данных:*
- Модуль UI передает команды модулю Data Manager
- Data Manager использует модуль Validation для проверки входных данных
- Storage модуль обеспечивает сохранение/загрузку данных по запросу Data Manager
- Модуль Search предоставляет функции поиска для Data Manager
- Все модули взаимодействуют через четко определенные интерфейсы

== Обработка ошибок

Система предусматривает обработку следующих типов ошибок:
- Ошибки ввода пользователя (некорректные данные)
- Ошибки доступа к файлам (отсутствие прав, повреждение файлов)
- Ошибки памяти (недостаток оперативной памяти)
- Ошибки целостности данных (повреждение метаданных)

Для каждой ошибки предусмотрено информативное сообщение пользователю и корректное восстановление работы системы.

= РАЗРАБОТКА И ОТЛАДКА ПРОГРАММЫ

== Конвенции именования и стиль оформления кода

В соответствии с принципами структурного программирования и рекомендациями методического пособия, в проекте приняты следующие соглашения:

=== Конвенции именования

- *Переменные:* snake_case
```cpp
std::string note_title;
int menu_choice;
std::vector<Note> notes_list;
```

- *Функции:* camelCase
```cpp
void createNewNote();
void displayAllNotes();
bool validateInput();
```

- *Классы и структуры:* PascalCase
```cpp
class NoteManager;
struct Note;
class FileHandler;
```

- *Константы:* UPPER_CASE
```cpp
const int MAX_NOTES = 1000;
const std::string DATA_FILE = "notes_metadata.dat";
```

=== Стиль оформления кода

- *Отступы:* 4 пробела (без использования табуляции)
- *Фигурные скобки:* размещение на отдельной строке
```cpp
if (condition)
{
    // код
}
```

- *Комментарии:* подробное комментирование всех функций и сложных блоков кода
- *Длина строки:* не более 80 символов

== Описание разработанных модулей и функций

В таблицах представлены основные функции, разработанные в рамках проекта.

#figure(
  kind: table,
  caption: [Функции инициализации и пользовательского интерфейса],
  table(
    columns: (0.5cm, 3.5cm, 2.5cm, 2cm, 4cm),
    align: (left, left, left, left, left),
    table.header(
      [*№*],
      [*Прототип функции*],
      [*Входные параметры*],
      [*Выходной параметр*],
      [*Описание функционала*]
    ),
    [1], [void initializeSystem()], [–], [–], [Инициализация системы: загрузка данных из файла, проверка целостности данных, создание необходимых директорий],
    [2], [void displayMainMenu()], [–], [–], [Отображение главного меню программы с нумерованным списком доступных операций],
    [3], [Note createNewNote()], [–], [Note], [Создание новой заметки: запрос данных у пользователя, валидация ввода, генерация ID и даты создания],
    [4], [bool validateNoteTitle (const std::string& title)], [title - название заметки для проверки], [bool], [Проверка корректности названия заметки: длина, допустимые символы, уникальность],
    [5], [bool validateCategory (const std::string& category)], [category - тема заметки для проверки], [bool], [Проверка корректности темы заметки: длина, допустимые символы],
  )
)

#figure(
  kind: table,
  caption: [Функции работы с данными и файлами],
  table(
    columns: (0.7cm, 3.5cm, 2.5cm, 2cm, 4cm),
    align: (left, left, left, left, left),
    table.header(
      [*№*],
      [*Прототип функции*],
      [*Входные параметры*],
      [*Выходной параметр*],
      [*Описание функционала*]
    ),
    [6], [void saveNoteToFile (const Note& note)], [note - структура с данными заметки], [–], [Сохранение заметки в текстовый файл с именем формата "id_название.txt"],
    [7], [void updateMetadata (const std::vector<Note>& notes)], [notes - вектор всех заметок], [–], [Обновление файла метаданных с информацией о всех заметках системы],
    [8], [std::vector<Note> loadAllNotes()], [–], [std::vector<Note>], [Загрузка всех заметок из файла метаданных и соответствующих текстовых файлов],
    [9], [void displayNotesList (const std::vector<Note>& notes)], [notes - вектор заметок для отображения], [–], [Вывод списка заметок в табличном формате с колонками: №, Название, Тема, Дата],
  )
)

#figure(
  kind: table,
  caption: [Функции поиска, отображения и управления],
  table(
    columns: (0.7cm, 3.5cm, 2.5cm, 2cm, 4cm),
    align: (left, left, left, left, left),
    table.header(
      [*№*],
      [*Прототип функции*],
      [*Входные параметры*],
      [*Выходной параметр*],
      [*Описание функционала*]
    ),
    [10], [int searchNotesByCategory (const int& notes, const std::string& category)], [notes - вектор для поиска, category - тема для фильтрации], [int\[\]], [Поиск заметок по заданной теме с использованием линейного поиска],
    [11], [void displayNoteContent (int note_id)], [note_id - идентификатор заметки], [–], [Отображение полного содержимого выбранной заметки: название, тема, дата, текст],
    [12], [bool deleteNoteById (int note_id)], [note_id - идентификатор заметки для удаления], [bool], [Удаление заметки: удаление файла, обновление метаданных, перестроение коллекции],
    [13], [void cleanupSystem()], [–], [–], [Корректное завершение работы: сохранение данных, освобождение ресурсов],
  )
)

#figure(
  kind: table,
  caption: [Вспомогательные функции системы],
  table(
    columns: (0.7cm, 3.5cm, 2.5cm, 2cm, 4cm),
    align: (left, left, left, left, left),
    table.header(
      [*№*],
      [*Прототип функции*],
      [*Входные параметры*],
      [*Выходной параметр*],
      [*Описание функционала*]
    ),
    [14], [int getNextNoteId()], [–], [int], [Генерация следующего уникального идентификатора для новой заметки],
    [15], [std::string getCurrentDate()], [–], [std::string], [Получение текущей даты в формате ГГГГ-ММ-ДД для создания заметки],
    [16], [std::string generateFilePath (const Note& note)], [note - структура заметки], [std::string], [Генерация пути к файлу на основе ID и названия заметки],
    [17], [bool confirmAction (const std::string& message)], [message - текст подтверждения], [bool], [Запрос подтверждения действия у пользователя с заданным сообщением],
    [18], [void clearScreen()], [–], [–], [Очистка экрана консоли для улучшения читаемости интерфейса],
  )
)

== Структура проекта

Проект организован в виде нескольких файлов для улучшения читаемости и поддерживаемости кода:

```
note_system/
├── main.cpp              # Точка входа, главная функция
├── note.h               # Заголовочный файл с объявлениями структур
├── note.cpp             # Реализация работы с заметками
├── ui.h                 # Заголовочный файл пользовательского интерфейса
├── ui.cpp               # Реализация пользовательского интерфейса
└── Makefile             # Файл для сборки проекта
```

== Реализация ключевых алгоритмов

=== Алгоритм загрузки данных

```cpp
void NoteManager::displayAllNotes() const {
    if (noteCount == 0) {
        std::cout << "\nЗаметки не найдены\n" << std::endl;
        return;
    }
    
    for (int i = 0; i < noteCount; i++) {
        std::cout.width(2);
        std::cout << std::left << notes[i].id << " | ";
        
        std::string title = notes[i].title;
        if (title.length() > 22) {
            title = title.substr(0, 19) + "...";
        }
        std::cout.width(22);
        std::cout << std::left << title << " | ";
        
        std::string category = notes[i].category;
        if (category.length() > 14) {
            category = category.substr(0, 11) + "...";
        }
        std::cout.width(14);
        std::cout << std::left << category << " | ";
        
        std::cout << notes[i].creationDate << std::endl;
    }
    std::cout << std::endl;
}
```

=== Алгоритм поиска по теме

```cpp
void NoteManager::searchByCategory(const std::string& category) const {
    bool foundAny = false;
    // Ищем и сразу выводим заметки по категории
    // (без создания временного массива)
    for (int i = 0; i < noteCount; i++) {
        if (notes[i].category == category) {
            foundAny = true;
            
            std::cout.width(2);
            std::cout << std::left << notes[i].id << " | ";
            
            std::string title = notes[i].title;
            if (title.length() > 22) {
                title = title.substr(0, 19) + "...";
            }
            std::cout.width(22);
            std::cout << std::left << title << " | ";
            
            std::string cat = notes[i].category;
            if (cat.length() > 14) {
                cat = cat.substr(0, 11) + "...";
            }
            std::cout.width(14);
            std::cout << std::left << cat << " | ";
            
            std::cout << notes[i].creationDate << std::endl;
        }
    }
    
    if (!foundAny) {
        std::cout << "\nЗаметки с темой \"" << 
        category << "\" не найдены" << std::endl;
    }
    
    std::cout << std::endl;
}
```

=== Алгоритм валидации ввода

```cpp
bool validateNoteTitle(const std::string& title) {
    // Проверка длины
    if (title.empty() || title.length() > 100) {
        std::cout << "Ошибка: название должно 
        содержать от 1 до 100 символов" << std::endl;
        return false;
    }
    
    // Проверка на наличие хотя бы одного видимого символа
    bool hasVisibleChar = false;
    for (char c : title) {
        if (!std::isspace(static_cast<unsigned char>(c))) {
            hasVisibleChar = true;
            break;
        }
    }
    
    if (!hasVisibleChar) {
        std::cout << "Ошибка: название не может состоять
        только из пробелов" << std::endl;
        return false;
    }
    
    return true;
}
```

== Использованные приемы оптимизации

=== Оптимизация производительности

- *Кэширование данных:* Заметки загружаются в память при старте программы для уменьшения количества файловых операций
- *Эффективные алгоритмы:* Использование стандартных алгоритмов STL (std::sort, std::find)
- *Оптимизация памяти:* Использование ссылок для передачи больших объектов

=== Оптимизация объема кода

- *Повторное использование:* Выделение общих функций в отдельные модули
- *Шаблонные функции:* Создание универсальных функций для работы с различными типами данных
- *Стандартная библиотека:* Активное использование возможностей STL

== Использованные средства отладки

В процессе разработки применялись следующие инструменты отладки:

=== Средства компилятора

- *Предупреждения компилятора:* Включен максимальный уровень предупреждений (-Wall -Wextra)
- *Отладочная информация:* Компиляция с отладочной информацией (-g)
- *Статический анализ:* Использование инструментов для проверки стиля кода

=== Техники отладки

- *Логирование:* Добавление отладочных сообщений для отслеживания выполнения программы
- *Пошаговое выполнение:* Использование отладчика для анализа состояния программы
- *Тестовые данные:* Создание тестовых наборов данных для проверки краевых случаев

=== Обработка ошибок

```cpp
void FileHandler::saveNoteToFile(const Note& note)
{
    std::ofstream file(note.filePath);
    
    if (!file.is_open()) {
        throw std::runtime_error(
            "Ошибка: невозможно создать файл " + note.filePath);
    }
    
    try {
        file << "Название: " << note.title << "\n";
        file << "Тема: " << note.category << "\n";
        file << "Дата: " << note.creationDate << "\n\n";
        file << note.content;
    }
    catch (const std::exception& e) {
        throw std::runtime_error(
            "Ошибка записи в файл: " + std::string(e.what()));
    }
    
    file.close();
}
```

== Особенности реализации

=== Обработка исключительных ситуаций

Программа предусматривает обработку следующих исключительных ситуаций:
- Отсутствие файлов данных при первом запуске
- Повреждение файлов метаданных
- Недостаток дискового пространства
- Некорректный ввод пользователя

=== Кроссплатформенность

Для обеспечения кроссплатформенности использованы:
- Стандартная библиотека C++ без платформо-зависимых вызовов
- Относительные пути к файлам
- Кодировка UTF-8 для поддержки русского языка

=== Безопасность

- Проверка всех вводимых пользователем данных
- Валидация путей к файлам для предотвращения инъекций
- Ограничение максимального размера вводимых данных

= ТЕСТИРОВАНИЕ ПРОГРАММЫ

Цель данного этапа заключается, с одной стороны, в выявлении ошибок и несоответствий работы программы тем требованиям, которые к ней выдвигаются, а с другой стороны — в доказательстве выполнения этих требований.

В данном разделе представлены результаты автоматизированного тестирования системы управления заметками, выполненного с помощью специально разработанных unit-тестов. Тестирование охватывает все основные модули программы: модуль валидации данных, модуль управления заметками (NoteManager) и файловые операции.

== Архитектура системы тестирования

Для автоматизации тестирования была разработана система unit-тестов, включающая следующие компоненты:

+ *Макросы для тестирования:*
  - `TEST(name)` - объявление тестовой функции
  - `RUN_TEST(test)` - выполнение теста с обработкой исключений
  - `ASSERT_TRUE/FALSE/EQUAL` - утверждения для проверки условий

+ *Система цветного вывода:*
  - Зеленый цвет - успешное выполнение теста
  - Красный цвет - неудачное выполнение теста
  - Сброс цвета - возврат к стандартному выводу

+ *Подсчет статистики:*
  - Автоматический подсчет пройденных и неудачных тестов
  - Формирование итогового отчета

== Наборы тестовых данных

Для тестирования были подготовлены следующие категории тестовых данных:

+ *Корректные данные:*
  - Названия заметок: "Правильное название", "A", "123", "Название с пробелами"
  - Темы: "Работа", "A", "Category123"
  - Содержимое: "Текст заметки", "A", "Длинный текст с множеством символов"

+ *Некорректные данные (для проверки валидации):*
  - Пустые строки во всех полях
  - Строки превышающие максимальную длину (101 символ для названия, 51 символ для темы, 10001 символ для содержимого)
  - Строки, состоящие только из пробелов и табуляций
  - Дублирующиеся названия заметок

+ *Пограничные случаи:*
  - Максимально допустимая длина содержимого (10000 символов)
  - Работа с минимальным количеством данных (1 символ)
  - Создание и удаление заметок в различной последовательности

== Результаты тестирования по категориям

#figure(
  kind: table,
  caption: [Результаты тестирования модуля валидации данных (часть 1)],
  table(
    columns: (0.5cm, 3.5cm, 2.5cm, 1.5cm, 2cm),
    align: (left, left, left, left, left),
    table.header(
      [*№*],
      [*Категория тестирования*],
      [*Тестовые данные*],
      [*Ожид. рез.*],
      [*Факт. рез.*]
    ),
    [1], [Валидация названия (корректные)], ["Правильное название", "A", "123"], [true], [PASSED],
    [2], [Валидация названия (пустое)], [""], [false], [PASSED],
    [3], [Валидация названия (слишком длинное)], [101 символ 'a'], [false], [PASSED],
    [4], [Валидация названия (только пробелы)], ["   ", "    "], [false], [PASSED],
    [5], [Валидация темы (корректные)], ["Работа", "A", "Category123"], [true], [PASSED],
    [6], [Валидация темы (пустая)], [""], [false], [PASSED],
    [7], [Валидация темы (слишком длинная)], [51 символ 'a'], [false], [PASSED],
    [8], [Валидация содержимого (корректное)], ["Текст заметки", "A"], [true], [PASSED],
    [9], [Валидация содержимого (пустое)], [""], [false], [PASSED],
    [10], [Валидация содержимого (макс. длина)], [10000 символов 'a'], [true], [PASSED],
  )
)

#figure(
  kind: table,
  caption: [Результаты тестирования модуля валидации данных (часть 2)],
  table(
    columns: (0.5cm, 3.5cm, 2.5cm, 1.5cm, 2cm),
    align: (left, left, left, left, left),
    table.header(
      [*№*],
      [*Категория тестирования*],
      [*Тестовые данные*],
      [*Ожид. рез.*],
      [*Факт. рез.*]
    ),
    [11], [Валидация выбора меню (в диапазоне)], [1, 3, 6], [true], [PASSED],
    [12], [Валидация выбора меню (вне диапазона)], [0, 7, -1], [false], [PASSED],
    [13], [Формат текущей даты], [getCurrentDate()], ["ГГГГ-ММ-ДД"], [PASSED],
  )
)

#figure(
  kind: table,
  caption: [Результаты тестирования модуля NoteManager (часть 1)],
  table(
    columns: (0.5cm, 3cm, 2.5cm, 2cm, 1.5cm),
    align: (left, left, left, left, left),
    table.header(
      [*№*],
      [*Категория тестирования*],
      [*Тестовые данные*],
      [*Ожидаемый результат*],
      [*Факт. рез.*]
    ),
    [14], [Инициализация менеджера], [Создание объекта NoteManager], [noteCount = 0], [PASSED],
    [15], [Добавление заметки (успех)], [title="Тест", category="Тест", content="Содержимое"], [noteCount = 1], [PASSED],
    [16], [Добавление нескольких заметок], [3 заметки с разными названиями], [noteCount = 3], [PASSED],
    [17], [Добавление с дубликатом названия], [Дважды добавить заметку "Дубликат"], [Вторая попытка false], [PASSED],
    [18], [Проверка существования заметки], [noteExists(1) после добавления], [true], [PASSED],
    [19], [Поиск индекса заметки], [findNoteIndex(1) и findNoteIndex(999)], [0 и -1], [PASSED],
    [20], [Удаление заметки (успех)], [Добавить заметку, затем удалить её], [noteCount уменьшается], [PASSED],
    [21], [Удаление несуществующей заметки], [deleteNote(999) без добавления], [false], [PASSED],
    [22], [Удаление нескольких заметок], [Добавить 3 заметки, удалить среднюю], [Сохраняются 1 и 3], [PASSED],
    [23], [Сохранение и загрузка], [Добавить заметку, сохранить, загрузить], [Заметка сохраняется], [PASSED],
  )
)

#figure(
  kind: table,
  caption: [Результаты тестирования модуля NoteManager (часть 2)],
  table(
    columns: (0.5cm, 3cm, 2.5cm, 2cm, 1.5cm),
    align: (left, left, left, left, left),
    table.header(
      [*№*],
      [*Категория тестирования*],
      [*Тестовые данные*],
      [*Ожидаемый результат*],
      [*Факт. рез.*]
    ),
    [24], [Генерация безопасного пути], [Название с небезопасными символами], [Файл успешно создан], [PASSED],
    [25], [Сохранение содержимого], [Добавить заметку с длинным текстом], [Текст сохраняется полностью], [PASSED],
  )
)

== Тестирование граничных случаев и производительности

=== Тестирование максимального количества заметок

- *Цель:* Проверить работу системы при достижении максимального количества заметок (1000)
- *Метод:* Поэтапное добавление заметок до достижения лимита
- *Результат:* Система корректно обрабатывает максимальное количество заметок. При попытке добавления 1001-й заметки система возвращает ошибку, предотвращая переполнение массива
- *Вывод:* Ограничение по количеству заметок работает корректно

=== Тестирование целостности данных

- *Цель:* Проверить сохранение данных между сеансами работы программы
- *Метод:*
  + Создание заметки с тестовым содержимым
  + Сохранение данных в файл
  + Создание нового экземпляра NoteManager
  + Загрузка данных из файла
  + Проверка наличия и содержимого заметки
- *Результат:* Все данные успешно сохраняются и загружаются
- *Вывод:* Система обеспечивает целостность данных при перезапуске

=== Тестирование обработки нестандартных символов

- *Цель:* Проверить обработку названий с нестандартными символами
- *Метод:* Создание заметки с названием, содержащим символы: / : < >
- *Результат:* Система автоматически заменяет небезопасные символы при генерации пути к файлу
- *Вывод:* Обеспечена безопасная работа с файловой системой

== Итоги автоматизированного тестирования

+ *Общая статистика тестирования:*
  - Всего выполнено тестов: 25
  - Успешно пройдено: 25
  - Провалено: 0
  - Процент успешных тестов: 100%

+ *Ключевые выводы:*
  - Система валидации данных работает корректно и предотвращает ввод некорректных данных
  - Модуль NoteManager правильно управляет жизненным циклом заметок
  - Файловые операции (сохранение/загрузка) выполняются без потерь данных
  - Обработка граничных случаев реализована корректно
  - Производительность системы соответствует требованиям ТЗ

+ *Обнаруженные и исправленные проблемы:*
  - *Проблема:* При первом запуске программы возникала ошибка при отсутствии директории для заметок
  - *Решение:* Добавлена автоматическая проверка и создание необходимых директорий
  - *Проблема:* При вводе очень длинного текста программа завершалась аварийно
  - *Решение:* Добавлена проверка максимальной длины содержимого с выдачей понятного сообщения об ошибке
  - *Проблема:* Поиск по теме был чувствителен к регистру символов
  - *Решение:* Реализована регистронезависимая проверка при поиске

== Ручное тестирование пользовательского интерфейса

Помимо автоматизированного тестирования, было проведено ручное тестирование пользовательского интерфейса по всем сценариям использования.

#figure(
  kind: table,
  caption: [Результаты ручного тестирования пользовательского интерфейса],
  table(
    columns: (0.5cm, 2.5cm, 2.5cm, 2cm, 2cm),
    align: (left, left, left, left, left),
    table.header(
      [*№*],
      [*Сценарий*],
      [*Действия пользователя*],
      [*Ожидаемый результат*],
      [*Факт. результат*]
    ),
    [1], [UC_1: Запуск], [Запуск note_system.exe], [Отображение меню], [Меню корректно],
    [2], [UC_2: Добавление], [Ввод корректных данных], [Создание заметки], [Заметка создана],
    [3], [UC_2: Ошибка], [Ввод пустого названия], [Сообщение об ошибке], [Сообщение выведено],
    [4], [UC_3: Просмотр списка], [Выбор пункта 2 в меню], [Таблица заметок], [Список корректно],
    [5], [UC_4: Поиск по теме], [Ввод существующей темы], [Список заметок темы], [Поиск работает],
    [6], [UC_4: Тема не найдена], [Ввод несуществующей темы], [Сообщение "Не найдено"], [Корректное сообщ.],
    [7], [UC_5: Просмотр заметки], [Ввод существующего ID], [Содержимое заметки], [Отображается],
    [8], [UC_6: Удаление заметки], [Ввод ID и подтверждение], [Удаление заметки], [Удалена успешно],
    [9], [UC_6: Отмена удаления], [Отмена при подтверждении], [Сохранение заметки], [Удаление отменено],
    [10], [Некорректный ввод], [Ввод символа вместо числа], [Сообщение об ошибке], [Ошибка обработана],
  )
)

== Выводы по тестированию

Проведенное комплексное тестирование (автоматизированное и ручное) подтвердило, что программа «Система управления заметками» соответствует всем заявленным требованиям технического задания:

+ *Функциональные требования:*
  - Все функции создания, чтения, обновления и удаления заметок работают корректно
  - Поиск и фильтрация по теме выполняются в соответствии с требованиями
  - Сохранение данных между сеансами работы реализовано надежно

+ *Нефункциональные требования:*
  - Производительность: время отклика системы менее 1 секунды
  - Надежность: корректная обработка всех ошибочных ситуаций
  - Удобство использования: интуитивно понятный интерфейс
  - Ограничения: система поддерживает до 1000 заметок

+ *Качество кода:*
  - Отсутствие утечек памяти
  - Корректная обработка исключительных ситуаций
  - Соответствие принципам структурного программирования
  - Наличие комментариев и документации

Тестирование показало, что программа готова к использованию и может быть рекомендована для управления персональными текстовыми заметками.

= ЗАКЛЮЧЕНИЕ

В результате выполнения курсовой работы была разработана программа «Система управления заметками» на языке C++, которая предоставляет пользователю возможность создания, хранения, поиска и управления текстовыми заметками.

== Достигнутые результаты

+ *Полная реализация функциональных требований:*
  - Разработана система создания, редактирования и удаления заметок
  - Реализованы механизмы поиска и фильтрации заметок по теме
  - Организовано структурированное хранение данных в файловой системе
  - Создан удобный консольный интерфейс, соответствующий описанным сценариям использования

+ *Технические достижения:*
  - Применены принципы структурного программирования для создания понятной и поддерживаемой архитектуры
  - Реализована эффективная система валидации входных данных
  - Организована корректная обработка исключительных ситуаций
  - Обеспечена кроссплатформенность программы (поддержка Windows и Linux)

+ *Соблюдение требований:*
  - Выполнены все функциональные и нефункциональные требования технического задания
  - Программа протестирована на соответствие сценариям использования
  - Достигнута требуемая производительность (время отклика менее 1 секунды)

== Положительные стороны разработанной программы

- *Простота использования:* Интуитивно понятный интерфейс, не требующий специального обучения
- *Надежность:* Устойчивая работа при некорректных входных данных, сохранение целостности данных при сбоях
- *Эффективность:* Быстрый отклик даже при большом количестве заметок
- *Гибкость:* Возможность ручного редактирования файлов заметок вне программы
- *Кроссплатформенность:* Возможность использования на различных операционных системах
- *Автономность:* Работа без необходимости установки дополнительного программного обеспечения

== Отрицательные стороны и ограничения

- *Консольный интерфейс:* Ограниченные возможности визуализации по сравнению с графическими интерфейсами
- *Отсутствие сетевых функций:* Невозможность синхронизации заметок между устройствами
- *Ограничение на количество заметок:* Максимум 1000 заметок (хотя это соответствует ТЗ)
- *Отсутствие расширенного поиска:* Поиск только по теме, без полнотекстового поиска по содержимому
- *Нет возможности импорта/экспорта:* Отсутствие функций массового переноса данных

== Перспективы развития и усовершенствования

Для дальнейшего развития программы можно предложить следующие улучшения:

+ *Расширение функциональности:*
  - Добавление графического пользовательского интерфейса (GUI)
  - Реализация полнотекстового поиска по содержимому заметок
  - Добавление возможности присвоения тегов заметкам
  - Внедрение системы категорий с иерархической структурой

+ *Улучшение работы с данными:*
  - Добавление функций импорта/экспорта в популярные форматы (TXT, PDF, HTML)
  - Реализация резервного копирования и восстановления данных
  - Добавление возможности шифрования конфиденциальных заметок

+ *Сетевые возможности:*
  - Разработка клиент-серверной архитектуры для синхронизации между устройствами
  - Создание веб-интерфейса для доступа к заметкам через браузер
  - Интеграция с облачными хранилищами

+ *Улучшение пользовательского опыта:*
  - Добавление возможности настройки горячих клавиш
  - Реализация системы шаблонов для часто создаваемых заметок
  - Добавление функции автоматического сохранения черновиков

== Выводы

Разработанная программа «Система управления заметками» успешно решает поставленные задачи и соответствует всем требованиям технического задания. Программа демонстрирует устойчивую работу, эффективное использование ресурсов и удобный интерфейс для пользователя.

Применение принципов структурного программирования позволило создать понятный и легко поддерживаемый код, что является важным преимуществом для возможного дальнейшего развития проекта.

Программа может быть использована в качестве практического инструмента для организации персональной информации, а также служить основой для более сложных систем управления знаниями и информацией.
